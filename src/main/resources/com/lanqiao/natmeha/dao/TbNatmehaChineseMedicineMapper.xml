<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanqiao.natmeha.dao.TbNatmehaChineseMedicineMapper">

    <resultMap id="BaseResultMap" type="com.lanqiao.natmeha.model.TbNatmehaChineseMedicine">
            <id property="itemid" column="itemID" jdbcType="INTEGER"/>
            <id property="itemcode" column="itemCode" jdbcType="CHAR"/>
            <result property="name" column="NAME" jdbcType="VARCHAR"/>
            <result property="alias" column="ALIAS" jdbcType="VARCHAR"/>
            <result property="classification" column="CLASSIFICATION" jdbcType="VARCHAR"/>
            <result property="harvesting" column="HARVESTING" jdbcType="VARCHAR"/>
            <result property="taste" column="TASTE" jdbcType="VARCHAR"/>
            <result property="merTropism" column="MER_TROPISM" jdbcType="VARCHAR"/>
            <result property="governance" column="GOVERNANCE" jdbcType="VARCHAR"/>
            <result property="usage" column="USAGE" jdbcType="VARCHAR"/>
            <result property="status" column="STATUS" jdbcType="VARCHAR"/>
            <result property="userCode" column="USER_CODE" jdbcType="CHAR"/>
            <result property="creater" column="CREATER" jdbcType="VARCHAR"/>
            <result property="itemcreateat" column="itemCreateAt" jdbcType="TIMESTAMP"/>
            <result property="updater" column="UPDATER" jdbcType="VARCHAR"/>
            <result property="itemupdateat" column="itemUpdateAt" jdbcType="TIMESTAMP"/>
            <association property="tbNatmehaFile">
                <id column="f_itemid" jdbcType="INTEGER" property="itemid" />
                <id column="f_itemCode" jdbcType="CHAR" property="itemcode" />
                <result column="f_dataCode" jdbcType="VARCHAR" property="dataCode" />
                <result column="f_fileName" jdbcType="VARCHAR" property="fileName" />
            </association>
    </resultMap>

    <sql id="Base_Column_List" >
        itemID,itemCode,NAME,
        ALIAS,CLASSIFICATION,HARVESTING,
        TASTE,MER_TROPISM,GOVERNANCE,
        'USAGE',STATUS,USER_CODE,
        CREATER,itemCreateAt,UPDATER,
        itemUpdateAt
    </sql>

    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from tb_natmeha_chinese_medicine
        where  itemID = #{itemid,jdbcType=INTEGER} AND itemCode = #{itemcode,jdbcType=CHAR} 
    </select>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        delete from tb_natmeha_chinese_medicine
        where  itemID = #{itemid,jdbcType=INTEGER} AND itemCode = #{itemcode,jdbcType=CHAR} 
    </delete>
    <insert id="insertTCMCommon">
        insert into tb_natmeha_chinese_medicine
        ( itemID,itemCode,NAME
        ,ALIAS,CLASSIFICATION,HARVESTING
        ,TASTE,MER_TROPISM,GOVERNANCE
        ,`USAGE`,STATUS,USER_CODE
        ,CREATER,itemCreateAt,UPDATER
        ,itemUpdateAt)
        values (#{itemid,jdbcType=INTEGER},#{itemcode,jdbcType=CHAR},#{name,jdbcType=VARCHAR}
        ,#{alias,jdbcType=VARCHAR},#{classification,jdbcType=VARCHAR},#{harvesting,jdbcType=VARCHAR}
        ,#{taste,jdbcType=VARCHAR},#{merTropism,jdbcType=VARCHAR},#{governance,jdbcType=VARCHAR}
        ,#{usage,jdbcType=VARCHAR},#{status,jdbcType=VARCHAR},#{userCode,jdbcType=CHAR}
        ,#{creater,jdbcType=VARCHAR},#{itemcreateat,jdbcType=TIMESTAMP},#{updater,jdbcType=VARCHAR}
        ,#{itemupdateat,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective">
        insert into tb_natmeha_chinese_medicine
        <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="itemid != null">itemid,</if>
                <if test="itemcode != null">itemcode,</if>
                <if test="name != null">name,</if>
                <if test="alias != null">alias,</if>
                <if test="classification != null">classification,</if>
                <if test="harvesting != null">harvesting,</if>
                <if test="taste != null">taste,</if>
                <if test="merTropism != null">merTropism,</if>
                <if test="governance != null">governance,</if>
                <if test="usage != null">usage,</if>
                <if test="status != null">status,</if>
                <if test="userCode != null">userCode,</if>
                <if test="creater != null">creater,</if>
                <if test="itemcreateat != null">itemcreateat,</if>
                <if test="updater != null">updater,</if>
                <if test="itemupdateat != null">itemupdateat,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
                <if test="itemid != null">itemID = #{itemid,jdbcType=INTEGER},</if>
                <if test="itemcode != null">itemCode = #{itemcode,jdbcType=CHAR},</if>
                <if test="name != null">NAME = #{name,jdbcType=VARCHAR},</if>
                <if test="alias != null">ALIAS = #{alias,jdbcType=VARCHAR},</if>
                <if test="classification != null">CLASSIFICATION = #{classification,jdbcType=VARCHAR},</if>
                <if test="harvesting != null">HARVESTING = #{harvesting,jdbcType=VARCHAR},</if>
                <if test="taste != null">TASTE = #{taste,jdbcType=VARCHAR},</if>
                <if test="merTropism != null">MER_TROPISM = #{merTropism,jdbcType=VARCHAR},</if>
                <if test="governance != null">GOVERNANCE = #{governance,jdbcType=VARCHAR},</if>
                <if test="usage != null">USAGE = #{usage,jdbcType=VARCHAR},</if>
                <if test="status != null">STATUS = #{status,jdbcType=VARCHAR},</if>
                <if test="userCode != null">USER_CODE = #{userCode,jdbcType=CHAR},</if>
                <if test="creater != null">CREATER = #{creater,jdbcType=VARCHAR},</if>
                <if test="itemcreateat != null">itemCreateAt = #{itemcreateat,jdbcType=TIMESTAMP},</if>
                <if test="updater != null">UPDATER = #{updater,jdbcType=VARCHAR},</if>
                <if test="itemupdateat != null">itemUpdateAt = #{itemupdateat,jdbcType=TIMESTAMP},</if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.lanqiao.natmeha.model.TbNatmehaChineseMedicine">
        update tb_natmeha_chinese_medicine
        <set>
                <if test="name != null">
                    NAME = #{name,jdbcType=VARCHAR},
                </if>
                <if test="alias != null">
                    ALIAS = #{alias,jdbcType=VARCHAR},
                </if>
                <if test="classification != null">
                    CLASSIFICATION = #{classification,jdbcType=VARCHAR},
                </if>
                <if test="harvesting != null">
                    HARVESTING = #{harvesting,jdbcType=VARCHAR},
                </if>
                <if test="taste != null">
                    TASTE = #{taste,jdbcType=VARCHAR},
                </if>
                <if test="merTropism != null">
                    MER_TROPISM = #{merTropism,jdbcType=VARCHAR},
                </if>
                <if test="governance != null">
                    GOVERNANCE = #{governance,jdbcType=VARCHAR},
                </if>
                <if test="usage != null">
                    `USAGE` = #{usage,jdbcType=VARCHAR},
                </if>
                <if test="status != null">
                    STATUS = #{status,jdbcType=VARCHAR},
                </if>
                <if test="userCode != null">
                    USER_CODE = #{userCode,jdbcType=CHAR},
                </if>
                <if test="creater != null">
                    CREATER = #{creater,jdbcType=VARCHAR},
                </if>
                <if test="itemcreateat != null">
                    itemCreateAt = #{itemcreateat,jdbcType=TIMESTAMP},
                </if>
                <if test="updater != null">
                    UPDATER = #{updater,jdbcType=VARCHAR},
                </if>
                <if test="itemupdateat != null">
                    itemUpdateAt = #{itemupdateat,jdbcType=TIMESTAMP},
                </if>
        </set>
        where   itemID = #{itemid,jdbcType=INTEGER} AND itemCode = #{itemcode,jdbcType=CHAR} 
    </update>
    <update id="updateByPrimaryKey" parameterType="com.lanqiao.natmeha.model.TbNatmehaChineseMedicine">
        update tb_natmeha_chinese_medicine
        set 
            NAME =  #{name,jdbcType=VARCHAR},
            ALIAS =  #{alias,jdbcType=VARCHAR},
            CLASSIFICATION =  #{classification,jdbcType=VARCHAR},
            HARVESTING =  #{harvesting,jdbcType=VARCHAR},
            TASTE =  #{taste,jdbcType=VARCHAR},
            MER_TROPISM =  #{merTropism,jdbcType=VARCHAR},
            GOVERNANCE =  #{governance,jdbcType=VARCHAR},
            USAGE =  #{usage,jdbcType=VARCHAR},
            STATUS =  #{status,jdbcType=VARCHAR},
            USER_CODE =  #{userCode,jdbcType=CHAR},
            CREATER =  #{creater,jdbcType=VARCHAR},
            itemCreateAt =  #{itemcreateat,jdbcType=TIMESTAMP},
            UPDATER =  #{updater,jdbcType=VARCHAR},
            itemUpdateAt =  #{itemupdateat,jdbcType=TIMESTAMP}
        where   itemID = #{itemid,jdbcType=INTEGER} AND itemCode = #{itemcode,jdbcType=CHAR} 
    </update>

    <select id="selectAllByCountry" resultMap="BaseResultMap" parameterType="tbNatmehaChineseMedicine">
        select
        m.itemID,
        m.itemCode,
        m.NAME,
        m.ALIAS,
        m.CLASSIFICATION,
        m.HARVESTING,
        m.TASTE,
        m.MER_TROPISM,
        m.GOVERNANCE,
        m.`USAGE`,
        m.STATUS,
        m.USER_CODE,
        m.CREATER,
        m.itemCreateAt,
        m.UPDATER,
        m.itemUpdateAt,
        f.itemID f_itemid,
        f.itemCode f_itemcode,
        f.DATA_CODE f_dataCode,
        f.FILE_NAME f_fileName
        from
        tb_natmeha_chinese_medicine m
        left join
        tb_natmeha_file f
        on m.itemCode = f.DATA_CODE
        <where>
        <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
            <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
            and CONCAT(m.name,m.alias,m.classification) like #{pattern}
        </if>
        </where>
    </select>

    <select id="queryById" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from
        tb_natmeha_chinese_medicine
        where itemID = #{itemid}
    </select>

    <delete id="deleteById">
        delete from tb_natmeha_chinese_medicine
        where  itemID = #{itemid,jdbcType=INTEGER}
    </delete>

    <!--中医常识 县级管理部门搜索-->
    <select id="selectAllByPageForCountry" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from
        tb_natmeha_chinese_medicine m
        where
        m.STATUS = '1'
            <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
                <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
                and CONCAT(m.name,m.alias,m.classification) like #{pattern}
            </if>
    </select>

    <select id="selectAllByCity" resultMap="BaseResultMap" parameterType="tbNatmehaChineseMedicine">
        select
        m.itemID,
        m.itemCode,
        m.NAME,
        m.ALIAS,
        m.CLASSIFICATION,
        m.HARVESTING,
        m.TASTE,
        m.MER_TROPISM,
        m.GOVERNANCE,
        m.`USAGE`,
        m.STATUS,
        m.USER_CODE,
        m.CREATER,
        m.itemCreateAt,
        m.UPDATER,
        m.itemUpdateAt,
        f.itemID f_itemid,
        f.itemCode f_itemcode,
        f.DATA_CODE f_dataCode,
        f.FILE_NAME f_fileName
        from
        tb_natmeha_chinese_medicine m
        left join
        tb_natmeha_file f
        on m.itemCode = f.DATA_CODE
        where m.status in ('9','3','4','5','6','7','8','11')
            <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
                <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
                and CONCAT(m.name,m.alias,m.classification) like #{pattern}
            </if>
    </select>

    <!--中医常识 市级管理部门搜索-->
    <select id="selectAllByPageForCity" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from
        tb_natmeha_chinese_medicine m
        where
        m.STATUS = '3'
            <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
                <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
                and CONCAT(m.name,m.alias,m.classification) like #{pattern}
            </if>
    </select>

    <select id="selectAllByProvince" resultMap="BaseResultMap" parameterType="tbNatmehaChineseMedicine">
        select
        m.itemID,
        m.itemCode,
        m.NAME,
        m.ALIAS,
        m.CLASSIFICATION,
        m.HARVESTING,
        m.TASTE,
        m.MER_TROPISM,
        m.GOVERNANCE,
        m.`USAGE`,
        m.STATUS,
        m.USER_CODE,
        m.CREATER,
        m.itemCreateAt,
        m.UPDATER,
        m.itemUpdateAt,
        f.itemID f_itemid,
        f.itemCode f_itemcode,
        f.DATA_CODE f_dataCode,
        f.FILE_NAME f_fileName
        from
        tb_natmeha_chinese_medicine m
        left join
        tb_natmeha_file f
        on m.itemCode = f.DATA_CODE
        where m.status in ('10','5','6','7','8','11')
        <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
            <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
            and CONCAT(m.name,m.alias,m.classification) like #{pattern}
        </if>
    </select>

    <!--中医常识 省级管理部门搜索-->
    <select id="selectAllByPageForProvince" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from
        tb_natmeha_chinese_medicine m
        where
        m.STATUS = '5'
            <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
                <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
                and CONCAT(m.name,m.alias,m.classification) like #{pattern}
            </if>
    </select>

    <!--中医常识 国医堂管理员搜索-->
    <select id="selectAllByPageFour" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from
        tb_natmeha_chinese_medicine m
        where
        m.STATUS in ('7','8','11')
            <if test="tbNatmehaChineseMedicine.message!=null and tbNatmehaChineseMedicine.message.trim().length()>0">
                <bind name="pattern" value="'%' + tbNatmehaChineseMedicine.message + '%'"/>
                and CONCAT(m.name,m.alias,m.classification) like #{pattern}
            </if>
    </select>
    <!--中医文化end-->
</mapper>
